<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Line Chart</title>
  <script src="<c:url value="/webjars/jquery/2.2.1/jquery.min.js"/>"></script>
  <script src="<c:url value="/webjars/highcharts/4.2.3/highcharts.js"/>"></script>
  <script src="<c:url value="/resources/js/initHighcharts.js"/>"></script>

<script>
$(function () {
	var option = $('#schDateType').val();
	var dateType = {
		'real':{
			'xDateFormat':'%Y-%m-%d %H:%M'
		},
		'hourly':{
			'xDateFormat':'%Y-%m-%d %H:00'
		},
		'daily':{
			'xDateFormat':'%Y-%m-%d'
		},
		'monthly':{
			'xDateFormat':'%Y-%m'
		},
		'yearly':{
			'xDateFormat':'%Y'
		}
	};
	var chartDefaults = {
		    title: {
		        text: ''
		    },
		    xAxis: {
				type: 'datetime'
		    },
		    yAxis: {
		        title: {
		            text: 'kVARH'
		        }
		    },
		    tooltip: {
		    	valueDecimals: 2,
		        valueSuffix: 'kVARH'
		    },
		    chart: {defaultSeriesType: 'spline'},
			plotOptions:{
		        spline: {
		            lineWidth: 2,
		            states: {
		                hover: {
		                    lineWidth: 2
		                }
		            },
		            marker: {
		                enabled: false
		            },
					tooltip:{
						xDateFormat:dateType[option].xDateFormat
					}
		        }
			},
			series: null
	}
	if(option == 'real') {
		$('#chart').highcharts($.extend(false, chartDefaults, {
			series: [{"name" : "지상", "data" : [
				 [1420383600000,1.73]
				,[1420384500000,1.76]
				,[1420385400000,1.91]
				,[1420386300000,1.91]
				,[1420387200000,1.73]
				,[1420388100000,1.76]
				,[1420389000000,1.87]
				,[1420389900000,1.8]
				,[1420390800000,1.8]
				,[1420391700000,1.8]
				,[1420392600000,1.94]
				,[1420393500000,2.05]
				,[1420394400000,1.76]
				,[1420395300000,1.91]
				,[1420396200000,1.8]
				,[1420397100000,1.94]
				,[1420398000000,1.91]
				,[1420398900000,1.8]
				,[1420399800000,1.73]
				,[1420400700000,1.73]
				,[1420401600000,1.69]
				,[1420402500000,1.69]
				,[1420403400000,1.58]
				,[1420404300000,1.55]
				,[1420405200000,1.62]
				,[1420406100000,1.69]
				,[1420407000000,1.58]
				,[1420407900000,2.7]
				,[1420408800000,2.77]
				,[1420409700000,2.63]
				,[1420410600000,2.56]
				,[1420411500000,2.7]
				,[1420412400000,2.27]
				,[1420413300000,2.74]
				,[1420414200000,2.99]
				,[1420415100000,2.63]
				,[1420416000000,2.66]
				,[1420416900000,3.17]
				,[1420417800000,2.95]
				,[1420418700000,2.99]
				,[1420419600000,2.99]
				,[1420420500000,3.46]
				,[1420421400000,3.1]
				,[1420422300000,3.67]
				,[1420423200000,3.78]
				,[1420424100000,3.64]
				,[1420425000000,3.56]
				,[1420425900000,4.03]
				,[1420426800000,3.24]
				,[1420427700000,3.35]
				,[1420428600000,3.35]
				,[1420429500000,3.24]
				,[1420430400000,3.6]
				,[1420431300000,3.56]
				,[1420432200000,4.14]
				,[1420433100000,3.71]
				,[1420434000000,3.38]
				,[1420434900000,3.89]
				,[1420435800000,3.74]
				,[1420436700000,3.78]
				,[1420437600000,4.07]
				,[1420438500000,4.03]
				,[1420439400000,4.03]
				,[1420440300000,3.82]
				,[1420441200000,3.6]
				,[1420442100000,3.6]
				,[1420443000000,3.96]
				,[1420443900000,3.74]
				,[1420444800000,3.38]
				,[1420445700000,3.2]
				,[1420446600000,2.66]
				,[1420447500000,2.7]
				,[1420448400000,2.59]
				,[1420449300000,2.16]
				,[1420450200000,2.27]
				,[1420451100000,2.05]
				,[1420452000000,2.7]
				,[1420452900000,2.66]
				,[1420453800000,2.92]
				,[1420454700000,2.52]
				,[1420455600000,3.1]
				,[1420456500000,2.84]
				,[1420457400000,2.74]
				,[1420458300000,2.66]
				,[1420459200000,2.48]
				,[1420460100000,2.27]
				,[1420461000000,2.45]
				,[1420461900000,2.63]
				,[1420462800000,2.63]
				,[1420463700000,2.34]
				,[1420464600000,2.59]
				,[1420465500000,2.56]
				,[1420466400000,2.34]
				,[1420467300000,2.02]
				,[1420468200000,2.02]
				,[1420469100000,2.38]]},
			{"name" : "진상", "data" : [
				 [1420383600000,0.86]
				,[1420384500000,0.86]
				,[1420385400000,0.9]
				,[1420386300000,0.97]
				,[1420387200000,0.9]
				,[1420388100000,0.94]
				,[1420389000000,0.94]
				,[1420389900000,0.9]
				,[1420390800000,0.94]
				,[1420391700000,0.97]
				,[1420392600000,0.97]
				,[1420393500000,0.97]
				,[1420394400000,0.94]
				,[1420395300000,0.97]
				,[1420396200000,0.94]
				,[1420397100000,0.97]
				,[1420398000000,0.94]
				,[1420398900000,0.86]
				,[1420399800000,0.83]
				,[1420400700000,0.94]
				,[1420401600000,0.9]
				,[1420402500000,1.01]
				,[1420403400000,1.04]
				,[1420404300000,1.04]
				,[1420405200000,0.97]
				,[1420406100000,1.04]
				,[1420407000000,1.12]
				,[1420407900000,0.5]
				,[1420408800000,0.79]
				,[1420409700000,0.86]
				,[1420410600000,0.79]
				,[1420411500000,0.79]
				,[1420412400000,1.01]
				,[1420413300000,1.33]
				,[1420414200000,1.4]
				,[1420415100000,1.37]
				,[1420416000000,1.37]
				,[1420416900000,1.37]
				,[1420417800000,1.33]
				,[1420418700000,1.51]
				,[1420419600000,1.73]
				,[1420420500000,1.37]
				,[1420421400000,1.4]
				,[1420422300000,1.66]
				,[1420423200000,1.51]
				,[1420424100000,1.48]
				,[1420425000000,1.73]
				,[1420425900000,1.66]
				,[1420426800000,1.51]
				,[1420427700000,1.62]
				,[1420428600000,1.66]
				,[1420429500000,1.84]
				,[1420430400000,1.98]
				,[1420431300000,1.8]
				,[1420432200000,1.87]
				,[1420433100000,1.98]
				,[1420434000000,1.87]
				,[1420434900000,2.12]
				,[1420435800000,1.94]
				,[1420436700000,1.98]
				,[1420437600000,2.09]
				,[1420438500000,1.98]
				,[1420439400000,1.98]
				,[1420440300000,1.94]
				,[1420441200000,1.84]
				,[1420442100000,1.62]
				,[1420443000000,1.73]
				,[1420443900000,1.73]
				,[1420444800000,1.87]
				,[1420445700000,1.58]
				,[1420446600000,1.8]
				,[1420447500000,2.05]
				,[1420448400000,1.91]
				,[1420449300000,1.44]
				,[1420450200000,1.08]
				,[1420451100000,1.01]
				,[1420452000000,0.9]
				,[1420452900000,0.72]
				,[1420453800000,0.58]
				,[1420454700000,0.54]
				,[1420455600000,0.18]
				,[1420456500000,0.54]
				,[1420457400000,0.54]
				,[1420458300000,0.58]
				,[1420459200000,0.58]
				,[1420460100000,0.68]
				,[1420461000000,0.79]
				,[1420461900000,0.76]
				,[1420462800000,0.83]
				,[1420463700000,0.79]
				,[1420464600000,0.79]
				,[1420465500000,0.86]
				,[1420466400000,0.9]
				,[1420467300000,1.04]
				,[1420468200000,1.08]
				,[1420469100000,1.08]]}
			]
		}));
	} else if(option == 'hourly') {
		$('#chart').highcharts($.extend(false, chartDefaults, {
			series: [{"name" : "지상", "data" : [
               [1420383600000,7.1]
               ,[1420387200000,7.31]
               ,[1420390800000,7.23]
               ,[1420394400000,7.55]
               ,[1420398000000,7.56]
               ,[1420401600000,6.95]
               ,[1420405200000,6.44]
               ,[1420408800000,8.74]
               ,[1420412400000,10.16]
               ,[1420416000000,11.02]
               ,[1420419600000,12.1]
               ,[1420423200000,14.01]
               ,[1420426800000,14.47]
               ,[1420430400000,13.54]
               ,[1420434000000,14.79]
               ,[1420437600000,15.48]
               ,[1420441200000,15.48]
               ,[1420444800000,14.68]
               ,[1420448400000,11.15]
               ,[1420452000000,9.18]
               ,[1420455600000,11.2]
               ,[1420459200000,10.72]
               ,[1420462800000,9.98]
               ,[1420466400000,9.83]]},
           {"name" : "진상", "data" : [
               [1420383600000,3.7]
               ,[1420387200000,3.63]
               ,[1420390800000,3.72]
               ,[1420394400000,3.85]
               ,[1420398000000,3.82]
               ,[1420401600000,3.53]
               ,[1420405200000,4.06]
               ,[1420408800000,3.45]
               ,[1420412400000,3.45]
               ,[1420416000000,5.47]
               ,[1420419600000,5.94]
               ,[1420423200000,5.94]
               ,[1420426800000,6.38]
               ,[1420430400000,7.1]
               ,[1420434000000,7.52]
               ,[1420437600000,8.13]
               ,[1420441200000,7.74]
               ,[1420444800000,6.95]
               ,[1420448400000,7.34]
               ,[1420452000000,4.43]
               ,[1420455600000,2.02]
               ,[1420459200000,2.24]
               ,[1420462800000,3.06]
               ,[1420466400000,3.34]]}
           ]
		}));
	} else if(option == 'daily') {
		$('#chart').highcharts($.extend(false, chartDefaults, {
			series: [{"name" : "지상", "data" : [
				[1420038000000,2359.72]
				,[1420124400000,1950.55]
				,[1420210800000,3003.92]
				,[1420297200000,1958.96]
				,[1420383600000,1780.22]
				,[1420470000000,2831.28]
				,[1420556400000,3009.79]
				,[1420642800000,3214.3]
				,[1420729200000,2984.0]
				,[1420815600000,2851.53]
				,[1420902000000,1813.52]
				,[1420988400000,1696.69]
				,[1421074800000,2998.95]
				,[1421161200000,3453.51]
				,[1421247600000,3403.76]
				,[1421334000000,2778.96]
				,[1421420400000,2860.61]
				,[1421506800000,2302.94]
				,[1421593200000,1901.27]
				,[1421679600000,2900.91]
				,[1421766000000,2897.72]
				,[1421852400000,2899.77]
				,[1421938800000,2936.35]
				,[1422025200000,2857.48]
				,[1422111600000,2023.73]
				,[1422198000000,1634.27]
				,[1422284400000,2616.28]
				,[1422370800000,2995.47]
				,[1422457200000,2915.29]
				,[1422543600000,2871.0]
				,[1422630000000,2898.19]]},
			{"name" : "진상", "data" : [
				[1420038000000,226.64]
				,[1420124400000,205.19]
				,[1420210800000,232.15]
				,[1420297200000,213.54]
				,[1420383600000,211.82]
				,[1420470000000,258.29]
				,[1420556400000,265.58]
				,[1420642800000,263.33]
				,[1420729200000,259.82]
				,[1420815600000,244.38]
				,[1420902000000,198.23]
				,[1420988400000,189.43]
				,[1421074800000,250.2]
				,[1421161200000,276.43]
				,[1421247600000,244.59]
				,[1421334000000,242.8]
				,[1421420400000,237.02]
				,[1421506800000,199.72]
				,[1421593200000,196.42]
				,[1421679600000,227.82]
				,[1421766000000,245.0]
				,[1421852400000,239.21]
				,[1421938800000,272.87]
				,[1422025200000,246.66]
				,[1422111600000,198.54]
				,[1422198000000,205.47]
				,[1422284400000,267.55]
				,[1422370800000,315.47]
				,[1422457200000,316.59]
				,[1422543600000,312.64]
				,[1422630000000,300.16]]}
			]
		}));
	} else if(option == 'monthly') {
		$('#chart').highcharts($.extend(false, chartDefaults, {
		    chart: {defaultSeriesType: 'column'},
	        plotOptions:{
				column: {
					tooltip:{
						xDateFormat:dateType[option].xDateFormat
					}
		        }
			},
			series: [{"name" : "지상", "data" : [
				[1356966000000,89459.93]
				,[1359644400000,85520.55]
				,[1362063600000,106383.8]
				,[1364742000000,96494.4]
				,[1367334000000,90127.6]
				,[1370012400000,89303.87]
				,[1372604400000,69466.12]
				,[1375282800000,97770.49]
				,[1377961200000,91385.79]
				,[1380553200000,86150.66]
				,[1383231600000,94409.66]
				,[1385823600000,80122.48]
				,[1388502000000,77923.51]
				,[1391180400000,72257.31]
				,[1393599600000,86537.79]
				,[1396278000000,81916.48]
				,[1398870000000,87290.05]
				,[1401548400000,88478.29]
				,[1404140400000,75006.11]
				,[1406818800000,72172.43]
				,[1409497200000,86355.25]
				,[1412089200000,86171.52]
				,[1414767600000,86860.92]
				,[1417359600000,101873.32]
				,[1420038000000,79241.22]]},
			{"name" : "진상", "data" : [
				[1356966000000,14493.07]
				,[1359644400000,13451.55]
				,[1362063600000,18711.6]
				,[1364742000000,15072.21]
				,[1367334000000,14200.72]
				,[1370012400000,14495.06]
				,[1372604400000,12273.01]
				,[1375282800000,16762.32]
				,[1377961200000,15879.47]
				,[1380553200000,13971.32]
				,[1383231600000,12353.59]
				,[1385823600000,8892.87]
				,[1388502000000,7676.08]
				,[1391180400000,7327.6]
				,[1393599600000,9459.6]
				,[1396278000000,9449.61]
				,[1398870000000,12007.85]
				,[1401548400000,12812.79]
				,[1404140400000,10590.58]
				,[1406818800000,10772.9]
				,[1409497200000,13220.74]
				,[1412089200000,13141.56]
				,[1414767600000,10617.43]
				,[1417359600000,10040.17]
				,[1420038000000,7336.92]]}
			]			
		}));
	} else if(option == 'yearly') {
		$('#chart').highcharts($.extend(false, chartDefaults, {
		    chart: {defaultSeriesType: 'column'},
		    xAxis: {
	            categories: ['2008','2009','2010','2011','2012','2013','2014','2015','2016']
	        },
			plotOptions:{
				column: {
					tooltip:{
						xDateFormat:dateType[option].xDateFormat
					}
		        }
			},
			series: [
				{"name":"지상","data":[323058.07,364777.02,388277.09,254852.8,246358.22,170556.79,117481.78,null,null]},
				{"name":"진상","data":[null,null,null,null,4230.33,14184.6,22971.7,null,null]}
			]

		}));
	}
});
</script>
</head>
<body>
<h2>Search Date Type</h2>
<form:form id="searchForm" name="searchForm" commandName="form" method="get" servletRelativeAction="/chartLine.do">
<form:select id="schDateType" path="schDateType">
	<form:option value="real" label="15분단위"/>
	<form:option value="hourly" label="시간별"/>
	<form:option value="daily" label="일별"/>
	<form:option value="monthly" label="월별"/>
	<form:option value="yearly" label="년별"/>
</form:select>
<input type="submit" value="Search"/>
</form:form>
<div id="chart" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
</body>
</html>

